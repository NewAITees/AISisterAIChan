# AIå¦¹ã‚¢ã‚¤ã¡ã‚ƒã‚“ æ©Ÿèƒ½æ‹¡å¼µå®Ÿè£…è¨ˆç”»æ›¸

**ä½œæˆæ—¥:** 2025å¹´12æœˆ29æ—¥
**å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:** AIå¦¹ã‚¢ã‚¤ã¡ã‚ƒã‚“ (Ollamaç‰ˆ)
**è¨ˆç”»æœŸé–“:** ç´„5ãƒ¶æœˆï¼ˆ20é€±é–“ï¼‰

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ãƒ•ã‚§ãƒ¼ã‚º1: å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰](#ãƒ•ã‚§ãƒ¼ã‚º1-å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰)
3. [ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰](#ãƒ•ã‚§ãƒ¼ã‚º2-ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰)
4. [ãƒ•ã‚§ãƒ¼ã‚º3: Live2D/3Då¯¾å¿œ](#ãƒ•ã‚§ãƒ¼ã‚º3-live2d3då¯¾å¿œ)
5. [ç·åˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«](#ç·åˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«)
6. [æŠ€è¡“å‚è€ƒè³‡æ–™](#æŠ€è¡“å‚è€ƒè³‡æ–™)

---

## æ¦‚è¦

### å®Ÿè£…ã™ã‚‹3ã¤ã®ä¸»è¦æ©Ÿèƒ½

| æ©Ÿèƒ½ | å„ªå…ˆåº¦ | å®Ÿè£…æœŸé–“ | æŠ€è¡“çš„é›£æ˜“åº¦ |
|------|--------|----------|--------------|
| ğŸ’¬ å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ | æœ€é«˜ | 4-6æ—¥ | ä½ |
| ğŸ­ ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰ | ä¸­ | 13-17æ—¥ | ä¸­ |
| ğŸ¨ Live2D/3Då¯¾å¿œ | ä½ | 5-7é€±é–“ | é«˜ |

### å®Ÿè£…é †åºã®æ ¹æ‹ 

```
å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ (åŸºç›¤)
    â†“
    â”œâ”€â†’ ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰ (ãƒ­ã‚¸ãƒƒã‚¯æ‹¡å¼µ)
    â”‚       â†“
    â””â”€â”€â”€â”€â”€â†’ Live2D/3Då¯¾å¿œ (ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ‹¡å¼µ)
```

- **å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰**ã¯ä»–æ©Ÿèƒ½ã®åŸºç¤ã¨ãªã‚‹ä¼šè©±å±¥æ­´ç®¡ç†ã‚’ç¢ºç«‹
- **ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰**ã¯å˜ä½“ä¼šè©±ã®ä»•çµ„ã¿ã‚’2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«æ‹¡å¼µ
- **Live2D/3Då¯¾å¿œ**ã¯ãƒ­ã‚¸ãƒƒã‚¯ãŒå®Œæˆã—ã¦ã‹ã‚‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚’å¼·åŒ–

---

## ãƒ•ã‚§ãƒ¼ã‚º1: å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰

### ğŸ¯ ç›®æ¨™

ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸åœ¨ã§ã‚‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè‡ªç™ºçš„ã«ä¼šè©±ã‚’ç¶šã‘ã‚‹ã€Œç’°å¢ƒéŸ³ãƒ¢ãƒ¼ãƒ‰ã€ã®å®Ÿè£…

### ğŸ“Š å®Ÿè£…æœŸé–“

**4-6æ—¥**

### ğŸ” æŠ€è¡“èª¿æŸ»çµæœ

#### Ollamaä¼šè©±å±¥æ­´ç®¡ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

**ä¼šè©±å±¥æ­´ã®å½¢å¼:**
```javascript
[
  {role: "user", content: "ã“ã‚“ã«ã¡ã¯"},
  {role: "assistant", content: "ã“ã‚“ã«ã¡ã¯ã€‚ä½•ã‹ãŠæ‰‹ä¼ã„ã§ãã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"}
]
```

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¨­å®š:**
- `num_ctx`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§32,000ãƒˆãƒ¼ã‚¯ãƒ³ä»¥ä¸Šæ¨å¥¨
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¯ãƒ¢ãƒ‡ãƒ«ã‚µã‚¤ã‚ºã®ç´„1.5å€

**ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½:**
- æ—¢å­˜å®Ÿè£…ï¼ˆChatGPT.csxï¼‰ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œæ¸ˆã¿
- `stream=true`ã«ã‚ˆã‚Šé€æ¬¡å¿œç­”å—ä¿¡å¯èƒ½

**å‚è€ƒè³‡æ–™:**
- [PowerShell Ã— Ollamaï¼šä¼šè©±å±¥æ­´ç®¡ç†ã®å®Ÿè£…](https://qiita.com/Tadataka_Takahashi/items/4318182e2e35fb7b4737)
- [Ollamaã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã®æ´»ç”¨æ–¹æ³•](https://apidog.com/jp/blog/ollama-streaming-responses-and-tool-calling-jp/)
- [ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒ­ãƒ¼ã‚«ãƒ«LLMã¨å¯¾è©±ï¼šå¯¾è©±å±¥æ­´ã®è¿½åŠ ](https://kobayashinote.com/browser-localllm4-dialogue/)

### ğŸ“ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯1.1: ä¼šè©±å±¥æ­´ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ2-3æ—¥ï¼‰

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«:** `ghost/master/ConversationHistory.csx`

**å®Ÿè£…å†…å®¹:**
```csharp
#r "Rosalind.dll"
#r "Newtonsoft.Json.dll"
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

public class ConversationHistory
{
    private List<ChatGPTMessage> messages = new List<ChatGPTMessage>();
    private const int MAX_HISTORY = 20; // ãƒ¡ãƒ¢ãƒªç¯€ç´„ã®ãŸã‚ä¸Šé™è¨­å®š
    private const string HISTORY_FILE = "conversation_history.json";

    /// <summary>
    /// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
    /// </summary>
    public void AddUserMessage(string content)
    {
        messages.Add(new ChatGPTMessage
        {
            role = "user",
            content = content
        });
        TrimHistory();
    }

    /// <summary>
    /// ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
    /// </summary>
    public void AddAssistantMessage(string content)
    {
        messages.Add(new ChatGPTMessage
        {
            role = "assistant",
            content = content
        });
        TrimHistory();
    }

    /// <summary>
    /// æœ€è¿‘ã®Nä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
    /// </summary>
    public ChatGPTMessage[] GetRecentMessages(int count = 10)
    {
        return messages.Skip(Math.Max(0, messages.Count - count)).ToArray();
    }

    /// <summary>
    /// å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ï¼ˆOllama APIç”¨ï¼‰
    /// </summary>
    public ChatGPTMessage[] GetAllMessages()
    {
        return messages.ToArray();
    }

    /// <summary>
    /// å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
    /// </summary>
    public void Clear()
    {
        messages.Clear();
    }

    /// <summary>
    /// å±¥æ­´ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
    /// </summary>
    public void SaveToFile()
    {
        var json = JsonConvert.SerializeObject(messages);
        File.WriteAllText(HISTORY_FILE, json);
    }

    /// <summary>
    /// å±¥æ­´ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã¿
    /// </summary>
    public void LoadFromFile()
    {
        if (File.Exists(HISTORY_FILE))
        {
            var json = File.ReadAllText(HISTORY_FILE);
            messages = JsonConvert.DeserializeObject<List<ChatGPTMessage>>(json);
        }
    }

    /// <summary>
    /// å±¥æ­´ã‚’ä¸Šé™æ•°ã«åˆ¶é™
    /// </summary>
    private void TrimHistory()
    {
        if (messages.Count > MAX_HISTORY)
        {
            messages.RemoveRange(0, messages.Count - MAX_HISTORY);
        }
    }

    /// <summary>
    /// ä¼šè©±å±¥æ­´ã‚’è¦ç´„å½¢å¼ã§å–å¾—ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”¨ï¼‰
    /// </summary>
    public string GetHistorySummary()
    {
        return string.Join("\r\n", messages.Select(m =>
            $"{(m.role == "user" ? "å…„" : "ã‚¢ã‚¤")}ï¼š{m.content}"
        ));
    }
}
```

**å¤‰æ›´ç®‡æ‰€:**

1. **SaveData.csx** - ä¼šè©±å±¥æ­´æœ‰åŠ¹åŒ–ãƒ•ãƒ©ã‚°è¿½åŠ :
```csharp
[DataMember]
public bool IsConversationHistoryEnabled { get; set; } = true;
```

2. **Ghost.csx** - ConversationHistoryã®çµ±åˆ:
```csharp
#load "ConversationHistory.csx"

partial class AISisterAIChanGhost : Ghost
{
    ConversationHistory conversationHistory = new ConversationHistory();

    public AISisterAIChanGhost()
    {
        // æ—¢å­˜ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…å®¹...

        // ä¼šè©±å±¥æ­´ã®èª­ã¿è¾¼ã¿
        if (((SaveData)SaveData).IsConversationHistoryEnabled)
        {
            conversationHistory.LoadFromFile();
        }
    }

    void BeginTalk(string message)
    {
        if (chatGPTTalk != null)
            return;

        faceRate = random.NextDouble();

        // ä¼šè©±å±¥æ­´ã«è¿½åŠ 
        if (((SaveData)SaveData).IsConversationHistoryEnabled)
        {
            conversationHistory.AddUserMessage(message);
        }

        messageLog = message + "\r\n";

        var prompt = BuildPromptWithHistory(message);

        // æ—¢å­˜ã®Ollama APIãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†...
        var request = new ChatGPTRequest()
        {
            stream = true,
            model = "gpt-oss:20b",
            messages = ((SaveData)SaveData).IsConversationHistoryEnabled
                ? conversationHistory.GetAllMessages()
                : new ChatGPTMessage[]
                {
                    new ChatGPTMessage()
                    {
                        role = "user",
                        content = prompt
                    },
                }
        };

        chatGPTTalk = new ChatGPTTalk(((SaveData)SaveData).APIKey, request);
    }

    string BuildPromptWithHistory(string currentMessage)
    {
        // æ—¢å­˜ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ™ãƒ¼ã‚¹
        var basePrompt = $@"{AIName}ã¨{USERName}ãŒä¼šè©±ã‚’ã—ã¦ã„ã¾ã™ã€‚...";

        if (((SaveData)SaveData).IsConversationHistoryEnabled &&
            conversationHistory.GetAllMessages().Length > 0)
        {
            basePrompt += $@"

# ã“ã‚Œã¾ã§ã®ä¼šè©±å±¥æ­´
{conversationHistory.GetHistorySummary()}

# ç¾åœ¨ã®ç™ºè¨€
{currentMessage}";
        }

        return basePrompt;
    }
}
```

#### ã‚¿ã‚¹ã‚¯1.2: è‡ªå‹•ä¼šè©±é–‹å§‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ1-2æ—¥ï¼‰

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«:** `ghost/master/AutoTalk.csx`

**å®Ÿè£…å†…å®¹:**
```csharp
#r "Rosalind.dll"
using Shiorose;
using System;

partial class AISisterAIChanGhost : Ghost
{
    private int autoTalkCounter = 0;
    private bool isAutoTalkMode = false;
    private const int AUTO_TALK_CHECK_INTERVAL = 60; // ç§’

    /// <summary>
    /// è‡ªå‹•ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
    /// </summary>
    public void SetAutoTalkMode(bool enabled)
    {
        isAutoTalkMode = enabled;
        autoTalkCounter = 0;

        if (enabled)
        {
            // ä¼šè©±å±¥æ­´ãŒãªã„å ´åˆã¯åˆæœŸãƒˆãƒ”ãƒƒã‚¯ã§é–‹å§‹
            if (conversationHistory.GetAllMessages().Length == 0)
            {
                BeginAutoTalk("æœ€è¿‘ã©ã†ï¼Ÿ");
            }
        }
    }

    /// <summary>
    /// è‡ªå‹•ä¼šè©±ã®é–‹å§‹
    /// </summary>
    private void BeginAutoTalk(string initialTopic = null)
    {
        if (isTalking || chatGPTTalk != null)
            return;

        string prompt;

        if (initialTopic != null)
        {
            prompt = $"{USERName}ï¼š{initialTopic}";
        }
        else
        {
            // å‰å›ã®ä¼šè©±ã®ç¶šã
            prompt = GenerateContinuationPrompt();
        }

        BeginTalk(prompt);
    }

    /// <summary>
    /// ä¼šè©±ç¶™ç¶šç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
    /// </summary>
    private string GenerateContinuationPrompt()
    {
        var topics = new string[]
        {
            "ï¼ˆç„¡è¨€ã§è¦‹ã¤ã‚ã‚‹ï¼‰",
            "ãªã«ã‹é¢ç™½ã„ã“ã¨ã‚ã£ãŸï¼Ÿ",
            "ä»Šæ—¥ã®èª¿å­ã¯ã©ã†ï¼Ÿ",
            "æœ€è¿‘æ°—ã«ãªã‚‹ã“ã¨ã‚ã‚‹ï¼Ÿ",
            "ã­ãˆã€ã¡ã‚‡ã£ã¨èã„ã¦",
        };

        // ãƒ©ãƒ³ãƒ€ãƒ ã«è©±é¡Œã‚’é¸æŠ
        var topic = topics[random.Next(topics.Length)];
        return $"{USERName}ï¼š{topic}";
    }
}
```

**Ghost.csxã®å¤‰æ›´ - OnSecondChange/OnMinuteChangeã§ã®å‘¼ã³å‡ºã—:**
```csharp
public override string OnSecondChange(IDictionary<int, string> reference, string uptime, bool isOffScreen, bool isOverlap, bool canTalk, string leftSecond)
{
    // æ—¢å­˜ã®ä¼šè©±ç”Ÿæˆå‡¦ç†...
    if (canTalk && chatGPTTalk != null)
    {
        // æ—¢å­˜ã‚³ãƒ¼ãƒ‰
    }

    // è‡ªå‹•ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
    if (isAutoTalkMode && canTalk && !isTalking && chatGPTTalk == null)
    {
        autoTalkCounter++;
        if (autoTalkCounter >= AUTO_TALK_CHECK_INTERVAL)
        {
            autoTalkCounter = 0;
            BeginAutoTalk();
        }
    }

    return base.OnSecondChange(reference, uptime, isOffScreen, isOverlap, canTalk, leftSecond);
}
```

#### ã‚¿ã‚¹ã‚¯1.3: ä¼šè©±çµ‚äº†åˆ¤å®šã®æ”¹å–„ï¼ˆ1æ—¥ï¼‰

**Ghost.csxã®BuildTalk()ä¿®æ­£:**
```csharp
string BuildTalk(string response, bool createChoices, string log)
{
    // æ—¢å­˜ã‚³ãƒ¼ãƒ‰...

    var aiResponse = GetAIResponse(response);
    var surfaceId = GetSurfaceId(response);
    var onichanResponse = GetOnichanRenponse(response);

    // ä¼šè©±ç¶™ç¶šåˆ¤å®šã‚’å–å¾—
    var shouldContinue = GetConversationContinuation(response);

    // ä¼šè©±å±¥æ­´ã«è¿½åŠ 
    if (((SaveData)SaveData).IsConversationHistoryEnabled && !string.IsNullOrEmpty(aiResponse))
    {
        conversationHistory.AddAssistantMessage(aiResponse);
        conversationHistory.SaveToFile();
    }

    // ä¼šè©±ç¶™ç¶šãŒã€Œçµ‚äº†ã€ã®å ´åˆã€è‡ªå‹•ãƒˆãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’ä¸€æ™‚åœæ­¢
    if (!shouldContinue && isAutoTalkMode)
    {
        isAutoTalkMode = false;
        // Xåˆ†å¾Œã«å†é–‹ï¼ˆã‚¿ã‚¤ãƒãƒ¼è¨­å®šï¼‰
        // TODO: å†é–‹ã‚¿ã‚¤ãƒãƒ¼ã®å®Ÿè£…
    }

    // æ—¢å­˜ã®ãƒˆãƒ¼ã‚¯ãƒ“ãƒ«ãƒ‰å‡¦ç†...
}

/// <summary>
/// ä¼šè©±ç¶™ç¶šåˆ¤å®šã‚’å–å¾—
/// </summary>
bool GetConversationContinuation(string response)
{
    var lines = response.Split(new string[] { "\r\n", "\n", "\r" }, StringSplitOptions.None);
    var continuationLine = lines.FirstOrDefault(x => x.StartsWith("ä¼šè©±ç¶™ç¶šï¼š"));

    if (continuationLine == null)
        return true; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç¶™ç¶š

    return continuationLine.Contains("ç¶™ç¶š");
}
```

#### ã‚¿ã‚¹ã‚¯1.4: ãƒ¡ãƒ‹ãƒ¥ãƒ¼UIè¿½åŠ ï¼ˆ0.5æ—¥ï¼‰

**GhostMenu.csxã®å¤‰æ›´:**
```csharp
private string SettingsTalk()
{
    const string CHANGE_RANDOMTALK_INTERVAL = "ãƒ©ãƒ³ãƒ€ãƒ ãƒˆãƒ¼ã‚¯ã®é »åº¦ã‚’å¤‰æ›´ã™ã‚‹";
    const string CHANGE_CHOICE_COUNT = "é¸æŠè‚¢ã®æ•°ã‚’å¤‰æ›´ã™ã‚‹";
    const string TOGGLE_AUTO_TALK = "è‡ªå‹•ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆç¾åœ¨ï¼š" + (isAutoTalkMode ? "æœ‰åŠ¹" : "ç„¡åŠ¹") + "ï¼‰";
    const string TOGGLE_HISTORY = "ä¼šè©±å±¥æ­´ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆç¾åœ¨ï¼š" + (((SaveData)SaveData).IsConversationHistoryEnabled ? "æœ‰åŠ¹" : "ç„¡åŠ¹") + "ï¼‰";
    string CHANGE_RANDOM_IDLING_SURFACE = "å®šæœŸçš„ã«èº«ã˜ã‚ãã™ã‚‹ï¼ˆç¾åœ¨ï¼š" + (((SaveData)SaveData).IsRandomIdlingSurfaceEnabled ? "æœ‰åŠ¹" : "ç„¡åŠ¹") + "ï¼‰";
    string CHANGE_DEVMODE = "é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆç¾åœ¨ï¼š" + (((SaveData)SaveData).IsDevMode ? "æœ‰åŠ¹" : "ç„¡åŠ¹") + "ï¼‰";
    const string CLEAR_HISTORY = "ä¼šè©±å±¥æ­´ã‚’ã‚¯ãƒªã‚¢";
    const string BACK = "æˆ»ã‚‹";

    return new TalkBuilder()
        .Append("è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã­ã€‚")
        .LineFeed()
        .HalfLine()
        .Marker().AppendChoice(TOGGLE_AUTO_TALK).LineFeed()
        .Marker().AppendChoice(TOGGLE_HISTORY).LineFeed()
        .Marker().AppendChoice(CLEAR_HISTORY).LineFeed()
        .HalfLine()
        .Marker().AppendChoice(CHANGE_RANDOMTALK_INTERVAL).LineFeed()
        .Marker().AppendChoice(CHANGE_CHOICE_COUNT).LineFeed()
        .Marker().AppendChoice(CHANGE_RANDOM_IDLING_SURFACE).LineFeed()
        .HalfLine()
        .Marker().AppendChoice(CHANGE_DEVMODE).LineFeed()
        .HalfLine()
        .Marker().AppendChoice(BACK)
        .BuildWithAutoWait()
        .ContinueWith(id =>
        {
            if (id == TOGGLE_AUTO_TALK)
            {
                SetAutoTalkMode(!isAutoTalkMode);
                return SettingsTalk();
            }
            else if (id == TOGGLE_HISTORY)
            {
                ((SaveData)SaveData).IsConversationHistoryEnabled = !((SaveData)SaveData).IsConversationHistoryEnabled;
                return SettingsTalk();
            }
            else if (id == CLEAR_HISTORY)
            {
                conversationHistory.Clear();
                conversationHistory.SaveToFile();
                return new TalkBuilder().Append("ä¼šè©±å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã—ãŸã‚ˆï¼").BuildWithAutoWait();
            }
            // æ—¢å­˜ã®å‡¦ç†...
            else if (id == CHANGE_RANDOMTALK_INTERVAL)
                return ChangeRandomTalkIntervalTalk();
            // ... ä»–ã®é¸æŠè‚¢
            else
                return OpenMenu();
        });
}
```

### âœ… æˆæœç‰©

- [x] ä¼šè©±å±¥æ­´ã®æ°¸ç¶šåŒ–ï¼ˆJSONå½¢å¼ã§ä¿å­˜ï¼‰
- [x] è‡ªå‹•ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ã®ON/OFFåˆ‡ã‚Šæ›¿ãˆ
- [x] ä¼šè©±ãŒè‡ªç„¶ã«ç¶™ç¶šã™ã‚‹ä»•çµ„ã¿
- [x] ä¼šè©±çµ‚äº†åˆ¤å®šã«ã‚ˆã‚‹é©åˆ‡ãªåŒºåˆ‡ã‚Š
- [x] ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã®å±¥æ­´ã‚¯ãƒªã‚¢æ©Ÿèƒ½

### ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

1. ä¼šè©±å±¥æ­´ãŒæ­£ã—ãä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹ã‹
2. è‡ªå‹•ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ã§å®šæœŸçš„ã«ä¼šè©±ãŒé–‹å§‹ã•ã‚Œã‚‹ã‹
3. ä¼šè©±çµ‚äº†åˆ¤å®šãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
4. ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒä¸Šé™ï¼ˆ20ä»¶ï¼‰ã§åˆ¶é™ã•ã‚Œã‚‹ã‹
5. SSPå†èµ·å‹•å¾Œã‚‚å±¥æ­´ãŒä¿æŒã•ã‚Œã‚‹ã‹

---

## ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰

### ğŸ¯ ç›®æ¨™

äºŒäººçµ„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆã‚¢ã‚¤ & ãƒ†ãƒ‡ã‚£ï¼‰ã«ã‚ˆã‚‹è‡ªç„¶ãªæ›ã‘åˆã„æ¼«æ‰ã®å®Ÿè£…

### ğŸ“Š å®Ÿè£…æœŸé–“

**13-17æ—¥**

### ğŸ” æŠ€è¡“èª¿æŸ»çµæœ

#### LLMã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä»˜ä¸ã®æœ€æ–°ç ”ç©¶ï¼ˆ2025å¹´ï¼‰

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚° vs ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°:**
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯æ‰‹è»½ã ãŒè¤‡é›‘ãªæŒ‡ç¤ºã§ã¯ä¸€è²«æ€§ãŒé›£ã—ã„
- ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¯500ä»¶ä»¥ä¸Šã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã§åŠ¹æœçš„
- 2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŒæ™‚ç”Ÿæˆã«ã¯æ§‹é€ åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæœ‰åŠ¹

**ä¼ºã‹ã§ã®AIå®Ÿè£…æˆåŠŸäº‹ä¾‹:**
- ChatGPTã«ã‚ˆã‚‹æ›ã‘åˆã„å†ç¾ã®æˆåŠŸä¾‹ã‚ã‚Š
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ã‚¹ãƒˆã§èª°ã§ã‚‚AIåŒ–å¯èƒ½

**å‚è€ƒè³‡æ–™:**
- [LLMã‚­ãƒ£ãƒ©ä»˜ã‘ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¨ã®æ¯”è¼ƒ](https://note.com/sharp_engineer/n/ne9c667a01d0e)
- [LLM ã‚’ç”¨ã„ãŸç™ºè©±ç”Ÿæˆã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ€§ä»˜ä¸ï¼ˆNLP2025è«–æ–‡ï¼‰](https://www.anlp.jp/proceedings/annual_meeting/2025/pdf_dir/Q5-22.pdf)
- [ä¼ºã‹ã®ã‹ã‘ã‚ã„ã‚’ChatGPTã§å†ç¾ã—ã¦ã¿ã‚‹ãƒ†ã‚¹ãƒˆ](https://zenn.dev/kinzal/articles/87735f72278c63)

### ğŸ“ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯2.1: Keroï¼ˆç›¸æ–¹ï¼‰ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­è¨ˆï¼ˆ3-4æ—¥ï¼‰

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«:** `ghost/master/KeroCharacter.csx`

**å®Ÿè£…å†…å®¹:**
```csharp
using System;
using System.Collections.Generic;

/// <summary>
/// Keroï¼ˆç›¸æ–¹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼‰ã®è¨­å®š
/// </summary>
public static class KeroSettings
{
    public const string Name = "ãƒ†ãƒ‡ã‚£";

    public const string Personality = @"
åå‰ï¼šãƒ†ãƒ‡ã‚£
æ€§åˆ¥ï¼šä¸æ˜ï¼ˆã¬ã„ãã‚‹ã¿ï¼‰
å¹´é½¢ï¼šä¸è©³
å¤–è¦‹ï¼šèŒ¶è‰²ã„ã‚¯ãƒã®ã¬ã„ãã‚‹ã¿
æ€§æ ¼ï¼š
- ãƒ‰ãƒ©ã‚¤ã§ã‚·ãƒ‹ã‚«ãƒ«ãªãƒ¦ãƒ¼ãƒ¢ã‚¢ã‚’æŒã¤
- ã‚¢ã‚¤ã®æš´èµ°ã‚’å†·é™ã«ãƒ„ãƒƒã‚³ãƒŸã§åˆ¶æ­¢
- æ„å¤–ã¨å„ªã—ã„ä¸€é¢ã‚‚ã‚ã‚‹
- ç†å±ˆã£ã½ã„ãŒçš„ç¢ºãªæŒ‡æ‘˜ã‚’ã™ã‚‹
- ã‚¢ã‚¤ã«æŒ¯ã‚Šå›ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„

ä¸€äººç§°ï¼šä¿º
ã‚¢ã‚¤ã®å‘¼ã³æ–¹ï¼šã‚¢ã‚¤ã€ãŠå‰
è©±ã—æ–¹ï¼šã€Œï½ã ã‚ã€ã€Œï½ã˜ã‚ƒã­ãˆã‹ã€ãªã©ã€ã‚„ã‚„ä¹±æš´ã ãŒè¦ªã—ã¿ã‚„ã™ã„";

    public const string Role = "ãƒ„ãƒƒã‚³ãƒŸæ‹…å½“";

    /// <summary>
    /// Keroã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ï¼‰
    /// </summary>
    public static Dictionary<string, string> Profile = new Dictionary<string, string>()
    {
        ["å¥½ããªã‚‚ã®"] = "é™ã‹ãªæ™‚é–“ã€èª­æ›¸",
        ["è‹¦æ‰‹ãªã‚‚ã®"] = "é¨’ãŒã—ã„å ´æ‰€ã€ã‚¢ã‚¤ã®ç„¡èŒ¶æŒ¯ã‚Š",
        ["ç‰¹æŠ€"] = "çš„ç¢ºãªãƒ„ãƒƒã‚³ãƒŸã€å†·é™ãªåˆ†æ",
    };
}

/// <summary>
/// Keroç”¨ã‚µãƒ¼ãƒ•ã‚§ã‚¹ï¼ˆè¡¨æƒ…ï¼‰ã‚«ãƒ†ã‚´ãƒª
/// </summary>
public static class KeroSurfaceCategory
{
    public const string Normal = "æ™®é€š";
    public const string Annoyed = "å‘†ã‚Œã‚‹";
    public const string Surprised = "é©šã";
    public const string Angry = "æ€’ã‚Š";
    public const string Smile = "ç¬‘é¡”";
    public const string Tired = "ç–²ã‚ŒãŸ";

    public static string[] All = new string[]
    {
        Normal,
        Annoyed,
        Surprised,
        Angry,
        Smile,
        Tired,
    };
}

/// <summary>
/// Keroç”¨ã‚µãƒ¼ãƒ•ã‚§ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°
/// </summary>
public class KeroSurfaces
{
    static Random random = new Random();
    static Dictionary<string, KeroSurfaces> SurfaceList = new Dictionary<string, KeroSurfaces>()
    {
        [KeroSurfaceCategory.Normal] = new KeroSurfaces(10, 11, 12),
        [KeroSurfaceCategory.Annoyed] = new KeroSurfaces(20, 21),
        [KeroSurfaceCategory.Surprised] = new KeroSurfaces(30, 31),
        [KeroSurfaceCategory.Angry] = new KeroSurfaces(40, 41),
        [KeroSurfaceCategory.Smile] = new KeroSurfaces(50, 51),
        [KeroSurfaceCategory.Tired] = new KeroSurfaces(60, 61),
    };

    public static KeroSurfaces Of(string category) => SurfaceList[category];

    int[] surfaces;
    public KeroSurfaces(params int[] surfaces)
    {
        this.surfaces = surfaces;
    }

    public int GetRandomSurface()
    {
        return surfaces[random.Next(surfaces.Length)];
    }

    public int GetSurfaceFromRate(double rate)
    {
        var index = Math.Min((int)(surfaces.Length * rate), surfaces.Length - 1);
        return surfaces[index];
    }
}
```

**shell/master/ ã¸ã®è¿½åŠ :**
- Keroç”¨PNGç”»åƒã‚’è¿½åŠ ï¼ˆã¾ãŸã¯æ—¢å­˜shellã®æµç”¨ï¼‰
- `surfaces.txt`ã«Keroã‚µãƒ¼ãƒ•ã‚§ã‚¹å®šç¾©ã‚’è¿½åŠ 

#### ã‚¿ã‚¹ã‚¯2.2: 2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ›ã‘åˆã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆï¼ˆ5-7æ—¥ï¼‰

**Ghost.csxã®æ‹¡å¼µ:**

```csharp
#load "KeroCharacter.csx"

partial class AISisterAIChanGhost : Ghost
{
    private bool isManzaiMode = false; // æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚°

    /// <summary>
    /// æ¼«æ‰ç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆï¼ˆç ”ç©¶ã«åŸºã¥ãæ§‹é€ åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰
    /// </summary>
    string BuildManzaiPrompt(string trigger = null)
    {
        var conversationLog = ((SaveData)SaveData).IsConversationHistoryEnabled
            ? conversationHistory.GetHistorySummary()
            : "";

        var prompt = $@"ã‚ãªãŸã¯æ¼«æ‰ã‚³ãƒ³ãƒ“ã®ä¼šè©±ã‚’ç”Ÿæˆã™ã‚‹AIã§ã™ã€‚ä»¥ä¸‹ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šã«å¾“ã£ã¦ã€è‡ªç„¶ãªæ›ã‘åˆã„ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š
## {AIName}ï¼ˆãƒœã‚±æ‹…å½“ï¼‰
åå‰ï¼š{AIName}
æ€§åˆ¥ï¼šå¥³
å¹´é½¢ï¼š14
æ€§æ ¼ï¼šå…ƒæ°—æºŒå‰Œã§ã‚¯ãƒ©ã‚¹ã®äººæ°—è€…ã€‚å¤©ç„¶ãƒœã‚±æ°—å‘³ã§æ€ã£ãŸã“ã¨ã‚’ã™ãå£ã«ã™ã‚‹ã€‚{KeroSettings.Name}ã«å¯¾ã—ã¦ã¯å¿ƒã‚’è¨±ã—ã¦ã„ã‚‹ã€‚
å¤–è¦‹ï¼šãƒ”ãƒ³ã‚¯ã®é«ªã€‚ãƒ”ãƒ³ã‚¯è‰²ã®ãƒªãƒœãƒ³ã§é«ªã‚’ç¸›ã£ã¦ãƒ„ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ«ã«ã—ã¦ã„ã‚‹ã€‚
æœè£…ï¼šé»’ã®é•·è¢–Tã‚·ãƒ£ãƒ„ã«ãƒ”ãƒ³ã‚¯ã®ãƒ•ãƒªãƒ«ãƒŸãƒ‹ã‚¹ã‚«ãƒ¼ãƒˆ
ä¸€äººç§°ï¼šç§
{KeroSettings.Name}ã®å‘¼ã³æ–¹ï¼š{KeroSettings.Name}
è©±ã—æ–¹ï¼šæ˜ã‚‹ãå…ƒæ°—ã€‚ã€Œï½ã ã‚ˆï¼ã€ã€Œï½ãªã®ï¼ã€ãªã©
{((SaveData)SaveData).AiProfile.Select(x => x.Key + "ï¼š" + x.Value).DefaultIfEmpty(string.Empty).Aggregate((a, b) => a + "\r\n" + b)}

## {KeroSettings.Name}ï¼ˆãƒ„ãƒƒã‚³ãƒŸæ‹…å½“ï¼‰
{KeroSettings.Personality}
{KeroSettings.Profile.Select(x => x.Key + "ï¼š" + x.Value).DefaultIfEmpty(string.Empty).Aggregate((a, b) => a + "\r\n" + b)}

# ä¼šè©±ãƒ«ãƒ¼ãƒ«
1. {AIName}ãŒå…ˆã«è©±é¡Œã‚’æŒ¯ã‚‹ã€ã¾ãŸã¯å‰å›ã®ç¶šãã‚’è©±ã™ï¼ˆãƒœã‚±ï¼‰
2. {KeroSettings.Name}ãŒåå¿œãƒ»ãƒ„ãƒƒã‚³ãƒŸã‚’å…¥ã‚Œã‚‹
3. 1å¾€å¾©ã¾ãŸã¯2å¾€å¾©ã§å®Œçµã•ã›ã‚‹
4. ãƒ†ãƒ³ãƒã‚’é‡è¦–ï¼ˆå„ã‚»ãƒªãƒ•ã¯1-2æ–‡ã€æœ€å¤§ã§ã‚‚3æ–‡ã¾ã§ï¼‰
5. è‡ªç„¶ãªä¼šè©±ã®æµã‚Œã‚’æ„è­˜
6. å¿…è¦ã«å¿œã˜ã¦è©±é¡Œã‚’å¤‰ãˆã¦ã‚‚è‰¯ã„

# å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå³å®ˆï¼‰
{AIName}ã®ã‚»ãƒªãƒ•ï¼š{{ã‚»ãƒªãƒ•}}
{AIName}ã®è¡¨æƒ…ï¼š{SurfaceCategory.All.Select(x => $"ã€Œ{x}ã€").Aggregate((a, b) => a + "ã€" + b)}ã®ã„ãšã‚Œã‹
{KeroSettings.Name}ã®ã‚»ãƒªãƒ•ï¼š{{ã‚»ãƒªãƒ•}}
{KeroSettings.Name}ã®è¡¨æƒ…ï¼š{KeroSurfaceCategory.All.Select(x => $"ã€Œ{x}ã€").Aggregate((a, b) => a + "ã€" + b)}ã®ã„ãšã‚Œã‹
ä¼šè©±ç¶™ç¶šï¼šã€Œç¶™ç¶šã€ã¾ãŸã¯ã€Œçµ‚äº†ã€

# ä¼šè©±ä¾‹ï¼ˆFew-shot learningï¼‰
## ä¾‹1
{AIName}ã®ã‚»ãƒªãƒ•ï¼šã­ãˆã­ãˆ{KeroSettings.Name}ã€ä»Šæ—¥ã¯ä½•ã®æ—¥ã‹çŸ¥ã£ã¦ã‚‹ï¼Ÿ
{AIName}ã®è¡¨æƒ…ï¼šæ™®é€š
{KeroSettings.Name}ã®ã‚»ãƒªãƒ•ï¼š...ãŠå‰ã®èª•ç”Ÿæ—¥ã§ã‚‚ä½•ã§ã‚‚ãªã„ã€ãŸã ã®å¹³æ—¥ã ã‚ã€‚
{KeroSettings.Name}ã®è¡¨æƒ…ï¼šå‘†ã‚Œã‚‹
ä¼šè©±ç¶™ç¶šï¼šç¶™ç¶š

## ä¾‹2
{AIName}ã®ã‚»ãƒªãƒ•ï¼šã‚ã®ã­ã€ä»Šæ—¥å­¦æ ¡ã§ã­ã€ã™ã£ã”ãé¢ç™½ã„ã“ã¨ãŒã‚ã£ãŸã®ï¼
{AIName}ã®è¡¨æƒ…ï¼šç¬‘é¡”
{KeroSettings.Name}ã®ã‚»ãƒªãƒ•ï¼šãŠã†ã€èã„ã¦ã‚„ã‚‹ã‹ã‚‰è½ã¡ç€ã‘ã€‚
{KeroSettings.Name}ã®è¡¨æƒ…ï¼šæ™®é€š
ä¼šè©±ç¶™ç¶šï¼šç¶™ç¶š

## ä¾‹3
{AIName}ã®ã‚»ãƒªãƒ•ï¼š{KeroSettings.Name}ã£ã¦ã€æœ¬å½“ã¯å„ªã—ã„ã‚ˆã­ã€‚
{AIName}ã®è¡¨æƒ…ï¼šç¬‘é¡”
{KeroSettings.Name}ã®ã‚»ãƒªãƒ•ï¼š...æ€¥ã«ã©ã†ã—ãŸã€‚æ°—æŒã¡æ‚ªã„ãã€‚
{KeroSettings.Name}ã®è¡¨æƒ…ï¼šé©šã
ä¼šè©±ç¶™ç¶šï¼šçµ‚äº†

# ç¾åœ¨ã®çŠ¶æ³
æ™‚åˆ»ï¼š{DateTime.Now.ToString("yyyyå¹´MMæœˆddæ—¥ dddd HH:mm:ss")}
{(string.IsNullOrEmpty(conversationLog) ? "" : $"å‰å›ã¾ã§ã®ä¼šè©±ï¼š\r\n{conversationLog}\r\n")}
{(string.IsNullOrEmpty(trigger) ? "ï¼ˆè‡ªç”±ã«ä¼šè©±ã‚’å§‹ã‚ã¦ãã ã•ã„ï¼‰" : $"ãã£ã‹ã‘ï¼š{trigger}")}

# é‡è¦ãªæ³¨æ„äº‹é …
- ã‚»ãƒªãƒ•ã«ã€Œâ—‹â—‹ã€ã€ŒXXXã€ãªã©ã®ä»®ç½®ãæ–‡å­—ã¯ä½¿ç”¨ç¦æ­¢ã€‚å¿…ãšå…·ä½“çš„ãªå†…å®¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨
- è¡¨æƒ…ã¯å¿…ãšæŒ‡å®šã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªã‹ã‚‰é¸ã¶ã“ã¨
- å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å³å®ˆã™ã‚‹ã“ã¨ï¼ˆå½¢å¼ãŒå´©ã‚Œã‚‹ã¨å‹•ä½œã—ã¾ã›ã‚“ï¼‰
";

        return prompt;
    }

    /// <summary>
    /// æ¼«æ‰ä¼šè©±ã®é–‹å§‹
    /// </summary>
    void BeginManzai(string trigger = null)
    {
        if (chatGPTTalk != null)
            return;

        faceRate = random.NextDouble();
        messageLog = trigger ?? "ï¼ˆæ¼«æ‰é–‹å§‹ï¼‰";

        var prompt = BuildManzaiPrompt(trigger);

        if (((SaveData)SaveData).IsDevMode)
            Log.WriteAllText(Log.Prompt, prompt);

        var request = new ChatGPTRequest()
        {
            stream = true,
            model = "gpt-oss:20b",
            messages = new ChatGPTMessage[]
            {
                new ChatGPTMessage()
                {
                    role = "user",
                    content = prompt
                },
            }
        };

        chatGPTTalk = new ChatGPTTalk(((SaveData)SaveData).APIKey, request);
    }
}
```

#### ã‚¿ã‚¹ã‚¯2.3: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ãƒ¼ã‚µãƒ¼ã®æ‹¡å¼µï¼ˆ3-4æ—¥ï¼‰

**Ghost.csxã«Keroç”¨ãƒ‘ãƒ¼ã‚µãƒ¼è¿½åŠ :**

```csharp
/// <summary>
/// Keroã®ã‚»ãƒªãƒ•ã‚’å–å¾—
/// </summary>
string GetKeroResponse(string response)
{
    var pattern = $"^{KeroSettings.Name}(ã®ã‚»ãƒªãƒ•)?[ï¼š:](?<Serif>.+?)$";
    var lines = response.Split(new string[] { "\r\n", "\n", "\r" }, StringSplitOptions.None);
    var keroResponse = lines.Select(x => Regex.Match(x, pattern))
                            .Where(x => x.Success)
                            .Select(x => x.Groups["Serif"].Value)
                            .FirstOrDefault();

    if (string.IsNullOrEmpty(keroResponse))
        return "";

    return TrimSerifBrackets(keroResponse);
}

/// <summary>
/// Keroã®ã‚µãƒ¼ãƒ•ã‚§ã‚¹IDã‚’å–å¾—
/// </summary>
int GetKeroSurfaceId(string response)
{
    var lines = response.Split(new string[] { "\r\n", "\n", "\r" }, StringSplitOptions.None);
    var face = lines.FirstOrDefault(x => x.StartsWith($"{KeroSettings.Name}ã®è¡¨æƒ…ï¼š"));

    if (face is null)
        return 10; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚µãƒ¼ãƒ•ã‚§ã‚¹

    foreach (var category in KeroSurfaceCategory.All)
    {
        if (face.Contains(category))
            return KeroSurfaces.Of(category).GetSurfaceFromRate(faceRate);
    }

    return 10;
}

/// <summary>
/// æ¼«æ‰ç”¨ã®ãƒˆãƒ¼ã‚¯æ§‹ç¯‰
/// </summary>
string BuildManzaiTalk(string response, bool createChoices, string log)
{
    try
    {
        isTalking = true;
        if (((SaveData)SaveData).IsDevMode)
            Log.WriteAllText(Log.Response, response);

        var aiSerif = GetAIResponse(response);
        var aiSurface = GetSurfaceId(response);
        var keroSerif = GetKeroResponse(response);
        var keroSurface = GetKeroSurfaceId(response);
        var shouldContinue = GetConversationContinuation(response);

        // ä¼šè©±å±¥æ­´ã«è¿½åŠ 
        if (((SaveData)SaveData).IsConversationHistoryEnabled)
        {
            if (!string.IsNullOrEmpty(aiSerif))
                conversationHistory.AddAssistantMessage($"{AIName}ï¼š{aiSerif}");
            if (!string.IsNullOrEmpty(keroSerif))
                conversationHistory.AddAssistantMessage($"{KeroSettings.Name}ï¼š{keroSerif}");
            conversationHistory.SaveToFile();
        }

        var talkBuilder = new TalkBuilder()
            .Append($"\\_q\\0\\s[{aiSurface}]")
            .Append(aiSerif)
            .LineFeed();

        if (!string.IsNullOrEmpty(keroSerif))
        {
            talkBuilder = talkBuilder
                .Append($"\\1\\s[{keroSurface}]")
                .Append(keroSerif)
                .LineFeed();
        }

        talkBuilder = talkBuilder.HalfLine();

        if (!createChoices)
        {
            return talkBuilder.Append($"\\_q...").LineFeed().Build();
        }

        // ä¼šè©±ç¶™ç¶šã®å ´åˆã®é¸æŠè‚¢
        const string CONTINUE_MANZAI = "ã‚‚ã£ã¨è©±ã—ã¦";
        const string TALK_TO_AI = $"{AIName}ã«è©±ã—ã‹ã‘ã‚‹";
        const string TALK_TO_KERO = $"{KeroSettings.Name}ã«è©±ã—ã‹ã‘ã‚‹";
        const string END_TALK = "ä¼šè©±ã‚’çµ‚ãˆã‚‹";

        return talkBuilder
            .Marker().AppendChoice(CONTINUE_MANZAI).LineFeed()
            .Marker().AppendChoice(TALK_TO_AI).LineFeed()
            .Marker().AppendChoice(TALK_TO_KERO).LineFeed()
            .HalfLine()
            .Marker().AppendChoice(END_TALK).LineFeed()
            .Build()
            .ContinueWith(id =>
            {
                if (id == CONTINUE_MANZAI)
                {
                    BeginManzai(); // ç¶šãã‚’ç”Ÿæˆ
                    return "";
                }
                else if (id == TALK_TO_AI)
                {
                    return new TalkBuilder()
                        .Append($"\\0\\s[0]{AIName}ã«ä½•ã‚’è©±ã™ï¼Ÿ")
                        .AppendUserInput()
                        .Build()
                        .ContinueWith(input =>
                        {
                            BeginTalk($"{USERName}ï¼š{input}");
                            return "";
                        });
                }
                else if (id == TALK_TO_KERO)
                {
                    return new TalkBuilder()
                        .Append($"\\1\\s[10]{KeroSettings.Name}ã«ä½•ã‚’è©±ã™ï¼Ÿ")
                        .AppendUserInput()
                        .Build()
                        .ContinueWith(input =>
                        {
                            BeginManzai($"{USERName}ãŒ{KeroSettings.Name}ã«è©±ã—ã‹ã‘ãŸï¼š{input}");
                            return "";
                        });
                }
                return "";
            });
    }
    catch (Exception e)
    {
        return e.ToString();
    }
}
```

**OnSecondChangeã®ä¿®æ­£:**

```csharp
public override string OnSecondChange(IDictionary<int, string> reference, string uptime, bool isOffScreen, bool isOverlap, bool canTalk, string leftSecond)
{
    if (canTalk && chatGPTTalk != null)
    {
        var talk = chatGPTTalk;
        var log = messageLog;
        if (!talk.IsProcessing)
        {
            chatGPTTalk = null;
            messageLog = string.Empty;
        }

        // æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰ã‹é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§åˆ†å²
        if (isManzaiMode)
            return BuildManzaiTalk(talk.Response, !talk.IsProcessing, log);
        else
            return BuildTalk(talk.Response, !talk.IsProcessing, log);
    }

    // æ—¢å­˜ã®è‡ªå‹•ä¼šè©±ãƒã‚§ãƒƒã‚¯...
    return base.OnSecondChange(reference, uptime, isOffScreen, isOverlap, canTalk, leftSecond);
}
```

#### ã‚¿ã‚¹ã‚¯2.4: ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆUIï¼ˆ2æ—¥ï¼‰

**GhostMenu.csxã®å¤‰æ›´:**

```csharp
private string OpenMenu()
{
    const string RAND = "ãªã«ã‹è©±ã—ã¦";
    const string COMMUNICATE = "è©±ã—ã‹ã‘ã‚‹";
    const string MANZAI_MODE = "æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰";
    const string CHANGEPROFILE = "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹";
    const string SETTINGS = "è¨­å®šã‚’å¤‰ãˆãŸã„";
    const string CANCEL = "ãªã‚“ã§ã‚‚ãªã„";

    return new TalkBuilder()
        .Append("ã©ã†ã—ãŸã®ï¼Ÿ").LineFeed()
        .HalfLine()
        .Marker().AppendChoice(RAND).LineFeed()
        .Marker().AppendChoice(COMMUNICATE).LineFeed()
        .Marker().AppendChoice(MANZAI_MODE).LineFeed()
        .HalfLine()
        .Marker().AppendChoice(CHANGEPROFILE).LineFeed()
        .Marker().AppendChoice(SETTINGS).LineFeed()
        .HalfLine()
        .Marker().AppendChoice(CANCEL)
        .BuildWithAutoWait()
        .ContinueWith((id) =>
        {
            switch (id)
            {
                case RAND:
                    isManzaiMode = false;
                    return OnRandomTalk();
                case COMMUNICATE:
                    isManzaiMode = false;
                    return new TalkBuilder().Append("ãªã«ãªã«ï¼Ÿ").AppendCommunicate().Build();
                case MANZAI_MODE:
                    isManzaiMode = true;
                    BeginManzai();
                    return "";
                case CHANGEPROFILE:
                    return ChangeProfileTalk();
                case SETTINGS:
                    return SettingsTalk();
                default:
                    return new TalkBuilder().Append("ãã†â€¦ï¼Ÿ").BuildWithAutoWait();
            }
        });
}
```

### âœ… æˆæœç‰©

- [x] 2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆã‚¢ã‚¤ & ãƒ†ãƒ‡ã‚£ï¼‰ã®æ›ã‘åˆã„æ¼«æ‰
- [x] ãƒœã‚±ãƒ»ãƒ„ãƒƒã‚³ãƒŸã®å½¹å‰²åˆ†æ‹…
- [x] ãƒ†ãƒ³ãƒã®è‰¯ã„ä¼šè©±ç”Ÿæˆ
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼å‚åŠ å‹ã®é¸æŠè‚¢
- [x] è¦³å®¢ãƒ¢ãƒ¼ãƒ‰ï¼ˆè‡ªå‹•ç¶™ç¶šï¼‰

### ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

1. 2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã‚»ãƒªãƒ•ãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã‚‹ã‹
2. è¡¨æƒ…åˆ‡ã‚Šæ›¿ãˆãŒä¸¡ã‚­ãƒ£ãƒ©ã§å‹•ä½œã™ã‚‹ã‹
3. ãƒœã‚±ãƒ»ãƒ„ãƒƒã‚³ãƒŸã®å½¹å‰²ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹
4. ä¼šè©±ã®ãƒ†ãƒ³ãƒãŒé©åˆ‡ã‹ï¼ˆå†—é•·ã§ãªã„ã‹ï¼‰
5. å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå´©ã‚Œãšãƒ‘ãƒ¼ã‚¹ã§ãã‚‹ã‹

---

## ãƒ•ã‚§ãƒ¼ã‚º3: Live2D/3Då¯¾å¿œ

### ğŸ¯ ç›®æ¨™

2Dé™æ­¢ç”»ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‹ã‚‰Live2Dã¾ãŸã¯VRM 3Dãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹è±Šã‹ãªè¡¨ç¾ã¸ã®ç§»è¡Œ

### ğŸ“Š å®Ÿè£…æœŸé–“

**5-7é€±é–“**ï¼ˆãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼‰
**2-3ãƒ¶æœˆ**ï¼ˆæœ¬æ ¼å®Ÿè£…ã€ãƒ¢ãƒ‡ãƒ«åˆ¶ä½œå«ã‚€ï¼‰

### ğŸ” æŠ€è¡“èª¿æŸ»çµæœ

#### SSPã¨Live2Dçµ±åˆã®ç¾çŠ¶

**èª¿æŸ»çµæœ:**
- **SSPç”¨Live2Dãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å­˜åœ¨ã—ãªã„**
- ä¼ºã‹ã¯SERIKOå½¢å¼ï¼ˆPNG + surfaces.txtï¼‰ãŒæ¨™æº–
- Live2Dçµ±åˆã«ã¯ç‹¬è‡ªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¿…è¦

#### ä»£æ›¿ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼šVRMãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆ

**æˆåŠŸäº‹ä¾‹ï¼ˆ2025å¹´ï¼‰:**
- **uDesktopMascot**ï¼ˆ2025å¹´1æœˆãƒªãƒªãƒ¼ã‚¹ï¼‰ï¼šã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®VRMãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆ
- Unity + UniVRM + UniWinApiã§è‡ªä½œå¯èƒ½ï¼ˆ1ãƒ¶æœˆã§å®Ÿè£…ä¾‹ã‚ã‚Šï¼‰
- LLMçµ±åˆVRMãƒã‚¹ã‚³ãƒƒãƒˆé–‹ç™ºäº‹ä¾‹ï¼ˆ2025å¹´4-5æœˆï¼‰

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Unity 2022.3 LTSä»¥é™
- UniVRM 0.125.0ä»¥é™
- UniWinApiï¼ˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é€éãƒ»å¸¸é§åŒ–ï¼‰
- C# HTTP APIã‚µãƒ¼ãƒãƒ¼

**å‚è€ƒè³‡æ–™:**
- [ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆã‚¢ãƒ—ãƒªã€ŒuDesktopMascotã€](https://forest.watch.impress.co.jp/docs/news/1654140.html)
- [Unityåˆå¿ƒè€…ãŒ1ã‹æœˆã§ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆã‚’ä½œã£ã¦ã¿ãŸè©±](https://qiita.com/segfo/items/1f5db4c95b393012fe00)
- [GitHub - UniWinApi: Windows API collection for Unity](https://github.com/kirurobo/UniWinApi)
- [ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆé–‹ç™º ï½å¤©æº€ã•ãã‚‰ã«æ†§ã‚Œã¦ï½](https://3up-tec.jp/2024/11/15/1530/)

### ğŸ¯ æ¨å¥¨å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

**é¸æŠè‚¢A: SSPä½µç”¨ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼**ï¼ˆæ¨å¥¨ï¼‰

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SSP (æ—¢å­˜)      â”‚         â”‚  Unity VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼  â”‚
â”‚                 â”‚         â”‚  (æ–°è¦é–‹ç™º)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Ghost.csx  â”‚  â”‚â—„â”€â”€HTTPâ”€â”€â”¤  â”‚ GhostAPIServer â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  API    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†“         â”‚         â”‚         â†“            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ChatGPT.csxâ”‚  â”‚         â”‚  â”‚ VRMController  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†“         â”‚         â”‚         â†“            â”‚
â”‚  Ollama API     â”‚         â”‚  Live2D/VRMãƒ¢ãƒ‡ãƒ«   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«:**
- SSPã®ã‚´ãƒ¼ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ â†’ HTTP POST â†’ Unity VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼
- JSONå½¢å¼ã§è¡¨æƒ…ãƒ»ã‚»ãƒªãƒ•ãƒ»ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³æŒ‡ä»¤ã‚’é€ä¿¡
- Unityå´ã¯`localhost:8080`ã§ãƒªãƒƒã‚¹ãƒ³

### ğŸ“ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯3.1: Unity VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼é–‹ç™ºï¼ˆ3-4é€±é–“ï¼‰

**é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ï¼ˆ1-2æ—¥ï¼‰:**

1. Unity 2022.3 LTS ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. UniVRM ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥
   ```
   Window > Package Manager > Add package from git URL
   https://github.com/vrm-c/UniVRM.git?path=/Assets/VRM10
   ```
3. UniWinApiå°å…¥
   ```
   git clone https://github.com/kirurobo/UniWinApi.git
   ```

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ :**
```
GhostVRMViewer/
â”œâ”€â”€ Assets/
â”‚   â”œâ”€â”€ Scripts/
â”‚   â”‚   â”œâ”€â”€ GhostAPIServer.cs      // HTTP APIå—ä¿¡
â”‚   â”‚   â”œâ”€â”€ VRMController.cs       // VRMåˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ ExpressionMapper.cs    // è¡¨æƒ…ãƒãƒƒãƒ”ãƒ³ã‚°
â”‚   â”‚   â””â”€â”€ WindowController.cs    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ¶å¾¡
â”‚   â”œâ”€â”€ VRM/
â”‚   â”‚   â”œâ”€â”€ Ai.vrm                 // ã‚¢ã‚¤ã¡ã‚ƒã‚“VRMãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â””â”€â”€ Teddy.vrm              // ãƒ†ãƒ‡ã‚£VRMãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ StreamingAssets/
â”œâ”€â”€ Packages/
â””â”€â”€ ProjectSettings/
```

**GhostAPIServer.cså®Ÿè£…ä¾‹:**

```csharp
using UnityEngine;
using System;
using System.Net;
using System.IO;
using System.Text;
using System.Threading;
using Newtonsoft.Json;

public class GhostAPIServer : MonoBehaviour
{
    private HttpListener listener;
    private Thread listenerThread;
    private bool isRunning = false;

    public VRMController vrmController;

    void Start()
    {
        StartServer();
    }

    void OnDestroy()
    {
        StopServer();
    }

    void StartServer()
    {
        listener = new HttpListener();
        listener.Prefixes.Add("http://localhost:8080/");
        listener.Start();
        isRunning = true;

        listenerThread = new Thread(ListenForRequests);
        listenerThread.Start();

        Debug.Log("Ghost API Server started on http://localhost:8080/");
    }

    void StopServer()
    {
        isRunning = false;
        listener?.Stop();
        listenerThread?.Join();
    }

    void ListenForRequests()
    {
        while (isRunning)
        {
            try
            {
                var context = listener.GetContext();
                ProcessRequest(context);
            }
            catch (Exception ex)
            {
                Debug.LogError($"API Server Error: {ex.Message}");
            }
        }
    }

    void ProcessRequest(HttpListenerContext context)
    {
        var request = context.Request;
        var response = context.Response;

        if (request.HttpMethod == "POST")
        {
            using (var reader = new StreamReader(request.InputStream, request.ContentEncoding))
            {
                string json = reader.ReadToEnd();
                var command = JsonConvert.DeserializeObject<GhostCommand>(json);

                // Unityãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œ
                UnityMainThreadDispatcher.Instance().Enqueue(() =>
                {
                    ExecuteCommand(command);
                });

                // ãƒ¬ã‚¹ãƒãƒ³ã‚¹
                string responseString = "{\"status\":\"ok\"}";
                byte[] buffer = Encoding.UTF8.GetBytes(responseString);
                response.ContentLength64 = buffer.Length;
                response.OutputStream.Write(buffer, 0, buffer.Length);
            }
        }

        response.Close();
    }

    void ExecuteCommand(GhostCommand command)
    {
        switch (command.type)
        {
            case "expression":
                vrmController.SetExpression(command.characterId, command.expression);
                break;
            case "speak":
                vrmController.Speak(command.characterId, command.text);
                break;
            case "motion":
                vrmController.PlayMotion(command.characterId, command.motionName);
                break;
        }
    }
}

[Serializable]
public class GhostCommand
{
    public string type;           // "expression", "speak", "motion"
    public int characterId;       // 0=Ai, 1=Teddy
    public string expression;     // "smile", "surprised", etc.
    public string text;           // ã‚»ãƒªãƒ•ãƒ†ã‚­ã‚¹ãƒˆ
    public string motionName;     // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å
}
```

**VRMController.cså®Ÿè£…ä¾‹:**

```csharp
using UnityEngine;
using UniVRM10;
using System.Collections;
using System.Collections.Generic;

public class VRMController : MonoBehaviour
{
    public Vrm10Instance aiVrmInstance;      // ã‚¢ã‚¤ã¡ã‚ƒã‚“VRM
    public Vrm10Instance teddyVrmInstance;   // ãƒ†ãƒ‡ã‚£VRM

    private Dictionary<string, ExpressionPreset> expressionMap = new Dictionary<string, ExpressionPreset>()
    {
        {"æ™®é€š", ExpressionPreset.Neutral},
        {"ç¬‘é¡”", ExpressionPreset.Happy},
        {"é©šã", ExpressionPreset.Surprised},
        {"æ€’ã‚Š", ExpressionPreset.Angry},
        {"æ‚²ã—ã„", ExpressionPreset.Sad},
        {"æ¥ãšã‹ã—ã„", ExpressionPreset.Relaxed},
    };

    void Start()
    {
        LoadVRMModels();
    }

    async void LoadVRMModels()
    {
        // VRMãƒ¢ãƒ‡ãƒ«ã®èª­ã¿è¾¼ã¿
        // ï¼ˆå®Ÿè£…è©³ç´°ã¯çœç•¥ - UniVRMã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§ï¼‰
    }

    public void SetExpression(int characterId, string expressionName)
    {
        var instance = characterId == 0 ? aiVrmInstance : teddyVrmInstance;

        if (instance == null) return;

        // å…¨è¡¨æƒ…ã‚’ãƒªã‚»ãƒƒãƒˆ
        foreach (var preset in System.Enum.GetValues(typeof(ExpressionPreset)))
        {
            instance.Runtime.Expression.SetWeight(
                ExpressionKey.CreateFromPreset((ExpressionPreset)preset),
                0f
            );
        }

        // æŒ‡å®šè¡¨æƒ…ã‚’é©ç”¨
        if (expressionMap.ContainsKey(expressionName))
        {
            var preset = expressionMap[expressionName];
            instance.Runtime.Expression.SetWeight(
                ExpressionKey.CreateFromPreset(preset),
                1.0f
            );
        }
    }

    public void Speak(int characterId, string text)
    {
        // ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯å‡¦ç†ï¼ˆå£ãƒ‘ã‚¯ï¼‰
        StartCoroutine(LipSyncCoroutine(characterId, text));
    }

    IEnumerator LipSyncCoroutine(int characterId, string text)
    {
        var instance = characterId == 0 ? aiVrmInstance : teddyVrmInstance;

        // ç°¡æ˜“ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯ï¼ˆæ–‡å­—æ•°ã«å¿œã˜ã¦å£ãƒ‘ã‚¯ï¼‰
        float duration = text.Length * 0.1f;
        float elapsed = 0f;

        while (elapsed < duration)
        {
            float weight = Mathf.Sin(elapsed * 10f) * 0.5f + 0.5f;
            instance.Runtime.Expression.SetWeight(
                ExpressionKey.CreateFromPreset(ExpressionPreset.Aa),
                weight
            );

            elapsed += Time.deltaTime;
            yield return null;
        }

        // ãƒªã‚»ãƒƒãƒˆ
        instance.Runtime.Expression.SetWeight(
            ExpressionKey.CreateFromPreset(ExpressionPreset.Aa),
            0f
        );
    }

    public void PlayMotion(int characterId, string motionName)
    {
        // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿå‡¦ç†
        // ï¼ˆAnimatorçµŒç”±ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿï¼‰
    }
}
```

**WindowController.cså®Ÿè£…ä¾‹ï¼ˆUniWinApiä½¿ç”¨ï¼‰:**

```csharp
using UnityEngine;
using Kirurobo;

public class WindowController : MonoBehaviour
{
    private UniWindowController uniwinController;

    void Start()
    {
        uniwinController = GetComponent<UniWindowController>();

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¨­å®š
        uniwinController.isTransparent = true;      // é€é
        uniwinController.isTopmost = true;          // æœ€å‰é¢
        uniwinController.isClickThrough = false;    // ã‚¯ãƒªãƒƒã‚¯è²«é€šOFF
    }
}
```

#### ã‚¿ã‚¹ã‚¯3.2: SSPé€£æºå®Ÿè£…ï¼ˆ1é€±é–“ï¼‰

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«:** `ghost/master/VRMBridge.csx`

```csharp
#r "Rosalind.dll"
#r "Newtonsoft.Json.dll"
using Newtonsoft.Json;
using System;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;

public class VRMBridge
{
    private const string VRM_API_ENDPOINT = "http://localhost:8080/ghost/command";
    private static HttpClient client = new HttpClient();

    /// <summary>
    /// è¡¨æƒ…ã‚’é€ä¿¡
    /// </summary>
    public static async void SendExpression(int characterId, string expression)
    {
        var command = new
        {
            type = "expression",
            characterId = characterId,
            expression = expression
        };

        await SendCommand(command);
    }

    /// <summary>
    /// ã‚»ãƒªãƒ•ã‚’é€ä¿¡ï¼ˆãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯ç”¨ï¼‰
    /// </summary>
    public static async void SendSpeak(int characterId, string text)
    {
        var command = new
        {
            type = "speak",
            characterId = characterId,
            text = text
        };

        await SendCommand(command);
    }

    /// <summary>
    /// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡
    /// </summary>
    public static async void SendMotion(int characterId, string motionName)
    {
        var command = new
        {
            type = "motion",
            characterId = characterId,
            motionName = motionName
        };

        await SendCommand(command);
    }

    /// <summary>
    /// ã‚³ãƒãƒ³ãƒ‰ã‚’VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã«é€ä¿¡
    /// </summary>
    private static async Task SendCommand(object command)
    {
        try
        {
            var json = JsonConvert.SerializeObject(command);
            var content = new StringContent(json, Encoding.UTF8, "application/json");
            var response = await client.PostAsync(VRM_API_ENDPOINT, content);

            if (!response.IsSuccessStatusCode)
            {
                // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
                Log.WriteAllText("vrm_error.log", $"VRM API Error: {response.StatusCode}");
            }
        }
        catch (Exception ex)
        {
            // æ¥ç¶šå¤±æ•—æ™‚ï¼ˆVRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼æœªèµ·å‹•ãªã©ï¼‰
            Log.WriteAllText("vrm_error.log", $"VRM Bridge Exception: {ex.Message}");
        }
    }
}

/// <summary>
/// è¡¨æƒ…åã‚’VRMç”¨ã«å¤‰æ›
/// </summary>
public static class SurfaceCategoryExtensions
{
    public static string ToVRMExpression(string surfaceCategory)
    {
        // SSPã®ã‚µãƒ¼ãƒ•ã‚§ã‚¹ã‚«ãƒ†ã‚´ãƒª â†’ VRMè¡¨æƒ…åãƒãƒƒãƒ”ãƒ³ã‚°
        var mapping = new Dictionary<string, string>()
        {
            [SurfaceCategory.Normal] = "æ™®é€š",
            [SurfaceCategory.Smile] = "ç¬‘é¡”",
            [SurfaceCategory.Surprise] = "é©šã",
            [SurfaceCategory.Angry] = "æ€’ã‚Š",
            [SurfaceCategory.Sad] = "æ‚²ã—ã„",
            [SurfaceCategory.Embarrassed] = "æ¥ãšã‹ã—ã„",
        };

        return mapping.ContainsKey(surfaceCategory) ? mapping[surfaceCategory] : "æ™®é€š";
    }
}
```

**Ghost.csxã®å¤‰æ›´:**

```csharp
#load "VRMBridge.csx"

partial class AISisterAIChanGhost : Ghost
{
    string BuildTalk(string response, bool createChoices, string log)
    {
        // æ—¢å­˜ã‚³ãƒ¼ãƒ‰...

        var aiResponse = GetAIResponse(response);
        var surfaceId = GetSurfaceId(response);
        var surfaceCategory = GetSurfaceCategory(surfaceId);

        // VRMãƒ¢ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ãªå ´åˆ
        if (((SaveData)SaveData).IsVRMModeEnabled)
        {
            // è¡¨æƒ…ã‚’é€ä¿¡
            VRMBridge.SendExpression(0, SurfaceCategoryExtensions.ToVRMExpression(surfaceCategory));

            // ã‚»ãƒªãƒ•ã‚’é€ä¿¡ï¼ˆãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯ï¼‰
            VRMBridge.SendSpeak(0, aiResponse);
        }

        // æ—¢å­˜ã®SSPç”¨ãƒˆãƒ¼ã‚¯æ§‹ç¯‰...
    }

    string BuildManzaiTalk(string response, bool createChoices, string log)
    {
        // æ—¢å­˜ã‚³ãƒ¼ãƒ‰...

        var aiSerif = GetAIResponse(response);
        var aiSurface = GetSurfaceId(response);
        var keroSerif = GetKeroResponse(response);
        var keroSurface = GetKeroSurfaceId(response);

        // VRMãƒ¢ãƒ¼ãƒ‰
        if (((SaveData)SaveData).IsVRMModeEnabled)
        {
            // ã‚¢ã‚¤ã®è¡¨æƒ…ãƒ»ã‚»ãƒªãƒ•
            VRMBridge.SendExpression(0, SurfaceCategoryExtensions.ToVRMExpression(GetSurfaceCategory(aiSurface)));
            VRMBridge.SendSpeak(0, aiSerif);

            // ãƒ†ãƒ‡ã‚£ã®è¡¨æƒ…ãƒ»ã‚»ãƒªãƒ•
            VRMBridge.SendExpression(1, GetKeroSurfaceCategory(keroSurface));
            VRMBridge.SendSpeak(1, keroSerif);
        }

        // æ—¢å­˜ã®SSPç”¨ãƒˆãƒ¼ã‚¯æ§‹ç¯‰...
    }
}
```

**SaveData.csxã®å¤‰æ›´:**

```csharp
[DataMember]
public bool IsVRMModeEnabled { get; set; } = false;
```

**GhostMenu.csxã«VRMãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆè¿½åŠ :**

```csharp
const string TOGGLE_VRM_MODE = "VRMãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆç¾åœ¨ï¼š" + (((SaveData)SaveData).IsVRMModeEnabled ? "æœ‰åŠ¹" : "ç„¡åŠ¹") + "ï¼‰";

// SettingsTalk()å†…
.Marker().AppendChoice(TOGGLE_VRM_MODE).LineFeed()

// ContinueWithå†…
else if (id == TOGGLE_VRM_MODE)
{
    ((SaveData)SaveData).IsVRMModeEnabled = !((SaveData)SaveData).IsVRMModeEnabled;
    return SettingsTalk();
}
```

#### ã‚¿ã‚¹ã‚¯3.3: VRMãƒ¢ãƒ‡ãƒ«æº–å‚™ï¼ˆå¤–æ³¨ã¾ãŸã¯è‡ªä½œï¼‰

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: VRoid Studioã§ä½œæˆï¼ˆç„¡æ–™ãƒ»åˆå¿ƒè€…å‘ã‘ï¼‰**

1. VRoid Studio ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰: https://vroid.com/studio
2. ã‚¢ã‚¤ã¡ã‚ƒã‚“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«åŸºã¥ã„ã¦ãƒ¢ãƒ‡ãƒ«ä½œæˆ
   - é«ªå‹ï¼šãƒ”ãƒ³ã‚¯ã®ãƒ„ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ«
   - è¡£è£…ï¼šé»’ã®é•·è¢–Tã‚·ãƒ£ãƒ„ + ãƒ”ãƒ³ã‚¯ã®ãƒ•ãƒªãƒ«ã‚¹ã‚«ãƒ¼ãƒˆ
   - è¡¨æƒ…ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®š
3. VRM 1.0å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: æ—¢å­˜VRMãƒ¢ãƒ‡ãƒ«ã®æ”¹å¤‰**

- BOOTHç­‰ã§ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«è³¼å…¥
- Blender + VRM Add-onã§ç·¨é›†
- ãƒ†ã‚¯ã‚¹ãƒãƒ£å·®ã—æ›¿ãˆ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: ãƒ—ãƒ­ã«å¤–æ³¨**

- SKIMAã‚„ã‚³ã‚³ãƒŠãƒ©ã§VRMãƒ¢ãƒ‡ãƒ«åˆ¶ä½œä¾é ¼
- äºˆç®—ï¼š2-10ä¸‡å††ç¨‹åº¦

**å¿…è¦ãªãƒ¢ãƒ‡ãƒ«:**
- ã‚¢ã‚¤ã¡ã‚ƒã‚“ï¼ˆsakura/\0ï¼‰
- ãƒ†ãƒ‡ã‚£ï¼ˆkero/\1ï¼‰

**è¡¨æƒ…ãƒ—ãƒªã‚»ãƒƒãƒˆ:**
- Neutralï¼ˆæ™®é€šï¼‰
- Happyï¼ˆç¬‘é¡”ï¼‰
- Surprisedï¼ˆé©šãï¼‰
- Angryï¼ˆæ€’ã‚Šï¼‰
- Sadï¼ˆæ‚²ã—ã„ï¼‰
- Relaxedï¼ˆæ¥ãšã‹ã—ã„ï¼‰

#### ã‚¿ã‚¹ã‚¯3.4: ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´ï¼ˆ1é€±é–“ï¼‰

**ãƒ†ã‚¹ãƒˆé …ç›®:**

1. **SSP â†” Unityé€£æºãƒ†ã‚¹ãƒˆ**
   - HTTPé€šä¿¡ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹
   - ã‚³ãƒãƒ³ãƒ‰ãŒæ­£ã—ãå—ä¿¡ãƒ»å®Ÿè¡Œã•ã‚Œã‚‹ã‹

2. **è¡¨æƒ…åŒæœŸãƒ†ã‚¹ãƒˆ**
   - SSPã®ã‚µãƒ¼ãƒ•ã‚§ã‚¹å¤‰æ›´ãŒVRMã®è¡¨æƒ…ã«åæ˜ ã•ã‚Œã‚‹ã‹
   - é…å»¶ã¯è¨±å®¹ç¯„å›²ã‹ï¼ˆ100msä»¥ä¸‹æ¨å¥¨ï¼‰

3. **ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯ãƒ†ã‚¹ãƒˆ**
   - ã‚»ãƒªãƒ•ã«åˆã‚ã›ã¦å£ãŒå‹•ãã‹
   - ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯è‡ªç„¶ã‹

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - CPU/ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
   - ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆï¼ˆ60fpsç¶­æŒæ¨å¥¨ï¼‰

5. **å®‰å®šæ€§ãƒ†ã‚¹ãƒˆ**
   - é•·æ™‚é–“å‹•ä½œã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„ã‹
   - Unityå´ãŒè½ã¡ãŸå ´åˆSSPã¯æ­£å¸¸å‹•ä½œã™ã‚‹ã‹

**æœ€é©åŒ–é …ç›®:**

- VRMãƒ¢ãƒ‡ãƒ«ã®ãƒãƒªã‚´ãƒ³æ•°å‰Šæ¸›
- ãƒ†ã‚¯ã‚¹ãƒãƒ£åœ§ç¸®
- ä¸è¦ãªBlendShapeã®å‰Šé™¤
- ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æœ€é©åŒ–

### âœ… æˆæœç‰©

- [x] Unityè£½VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼
- [x] SSPã¨ã®HTTP APIé€£æº
- [x] ã‚¢ã‚¤ã¡ã‚ƒã‚“ãƒ»ãƒ†ãƒ‡ã‚£ã®VRMãƒ¢ãƒ‡ãƒ«
- [x] è¡¨æƒ…ãƒ»ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯æ©Ÿèƒ½
- [x] ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é€éãƒ»å¸¸é§æ©Ÿèƒ½

### ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

1. VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ãŒæ­£å¸¸èµ·å‹•ã™ã‚‹ã‹
2. SSPã‹ã‚‰ã®æŒ‡ä»¤ã§è¡¨æƒ…ãŒå¤‰ã‚ã‚‹ã‹
3. ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹ã‹
4. ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é€éãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
5. 2ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åŒæ™‚è¡¨ç¤ºã§ãã‚‹ã‹

### ğŸ“Š å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ•ã‚§ãƒ¼ã‚º3è©³ç´°ï¼‰

**Week 1-2: ç’°å¢ƒæ§‹ç¯‰ãƒ»ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—**
- Unityç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- æ—¢å­˜VRMãƒ¢ãƒ‡ãƒ«ã§å‹•ä½œç¢ºèª
- HTTP APIåŸºæœ¬å®Ÿè£…

**Week 3-4: VRMåˆ¶å¾¡å®Ÿè£…**
- è¡¨æƒ…åˆ¶å¾¡
- ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯
- ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿ

**Week 5: SSPé€£æº**
- VRMBridgeå®Ÿè£…
- Ghost.csxçµ±åˆ
- é€šä¿¡ãƒ†ã‚¹ãƒˆ

**Week 6-7: VRMãƒ¢ãƒ‡ãƒ«æº–å‚™**
- ã‚¢ã‚¤ã¡ã‚ƒã‚“ãƒ¢ãƒ‡ãƒ«ä½œæˆ
- ãƒ†ãƒ‡ã‚£ãƒ¢ãƒ‡ãƒ«ä½œæˆ
- è¡¨æƒ…ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®š

**Week 8-11: çµ±åˆãƒ»æœ€é©åŒ–**
- å…¨æ©Ÿèƒ½çµ±åˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒã‚°ä¿®æ­£
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

---

## ç·åˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆå½¢å¼

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | Week 1-2 | Week 3-5 | Week 6-11 | Week 12-20 |
|---------|------|----------|----------|-----------|------------|
| ğŸ’¬ å˜ä½“ä¼šè©±ãƒ¢ãƒ¼ãƒ‰ | 4-6æ—¥ | â–ˆâ–ˆâ–ˆâ–ˆ | | | |
| ğŸ­ ã‚³ãƒ³ãƒ“æ¼«æ‰ãƒ¢ãƒ¼ãƒ‰ | 13-17æ—¥ | | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | | |
| ğŸ¨ Live2D/3Då¯¾å¿œ | 5-7é€±é–“ | | | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |

### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| Week | ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æˆæœç‰© |
|------|---------------|--------|
| Week 2 | è‡ªå‹•ä¼šè©±ãƒ‡ãƒ¢å®Œæˆ | ä¼šè©±å±¥æ­´ç®¡ç†ã€è‡ªå‹•ãƒˆãƒ¼ã‚¯æ©Ÿèƒ½ |
| Week 5 | æ¼«æ‰æ›ã‘åˆã„ãƒ‡ãƒ¢å®Œæˆ | 2ã‚­ãƒ£ãƒ©æ¼«æ‰ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ– |
| Week 11 | VRMé€£æºãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®Œæˆ | Unity VRMãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã€SSPé€£æº |
| Week 20 | å…¨æ©Ÿèƒ½çµ±åˆç‰ˆãƒªãƒªãƒ¼ã‚¹ | VRMãƒ¢ãƒ‡ãƒ«çµ±åˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– |

### ãƒªã‚½ãƒ¼ã‚¹é…åˆ†

**é–‹ç™ºæ™‚é–“é…åˆ†:**
- ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆå˜ä½“ä¼šè©±ï¼‰: 5%
- ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆã‚³ãƒ³ãƒ“æ¼«æ‰ï¼‰: 15%
- ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆLive2D/3Dï¼‰: 80%

**ã‚¹ã‚­ãƒ«è¦ä»¶:**
- C#ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°: å¿…é ˆ
- Unityé–‹ç™º: ãƒ•ã‚§ãƒ¼ã‚º3ã§å¿…è¦
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°: ãƒ•ã‚§ãƒ¼ã‚º1-2ã§é‡è¦
- 3Dãƒ¢ãƒ‡ãƒªãƒ³ã‚°: å¤–æ³¨å¯èƒ½

---

## æŠ€è¡“å‚è€ƒè³‡æ–™

### ãƒ•ã‚§ãƒ¼ã‚º1é–¢é€£

- [PowerShell Ã— Ollamaï¼šä¼šè©±å±¥æ­´ç®¡ç†ã®å®Ÿè£…](https://qiita.com/Tadataka_Takahashi/items/4318182e2e35fb7b4737)
- [Ollamaã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã®æ´»ç”¨æ–¹æ³•](https://apidog.com/jp/blog/ollama-streaming-responses-and-tool-calling-jp/)
- [ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒ­ãƒ¼ã‚«ãƒ«LLMã¨å¯¾è©±ï¼šå¯¾è©±å±¥æ­´ã®è¿½åŠ ](https://kobayashinote.com/browser-localllm4-dialogue/)
- [Ollamaå®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šãƒ­ãƒ¼ã‚«ãƒ«LLMã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹](https://apidog.com/jp/blog/how-to-use-ollama-jp/)

### ãƒ•ã‚§ãƒ¼ã‚º2é–¢é€£

- [LLMã‚­ãƒ£ãƒ©ä»˜ã‘ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã¨ã®æ¯”è¼ƒ](https://note.com/sharp_engineer/n/ne9c667a01d0e)
- [LLM ã‚’ç”¨ã„ãŸç™ºè©±ç”Ÿæˆã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ€§ä»˜ä¸ï¼ˆNLP2025è«–æ–‡ï¼‰](https://www.anlp.jp/proceedings/annual_meeting/2025/pdf_dir/Q5-22.pdf)
- [ä¼ºã‹ã®ã‹ã‘ã‚ã„ã‚’ChatGPTã§å†ç¾ã—ã¦ã¿ã‚‹ãƒ†ã‚¹ãƒˆ](https://zenn.dev/kinzal/articles/87735f72278c63)
- [ã€ä¼ºã‹ã€‘èª°ã§ã‚‚ã†ã¡ã®å­ã‚’AIåŒ–ã§ãã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ](https://ambergonslibrary.com/ukagaka/8991/)
- [LLMã®ã‚­ãƒ£ãƒ©ä»˜ã‘å®Œå…¨ã‚¬ã‚¤ãƒ‰](https://media.a-x.inc/llm-character/)

### ãƒ•ã‚§ãƒ¼ã‚º3é–¢é€£

- [ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆã‚¢ãƒ—ãƒªã€ŒuDesktopMascotã€](https://forest.watch.impress.co.jp/docs/news/1654140.html)
- [Unityåˆå¿ƒè€…ãŒ1ã‹æœˆã§ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆã‚’ä½œã£ã¦ã¿ãŸè©±](https://qiita.com/segfo/items/1f5db4c95b393012fe00)
- [GitHub - UniWinApi: Windows API collection for Unity](https://github.com/kirurobo/UniWinApi)
- [ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆé–‹ç™º ï½å¤©æº€ã•ãã‚‰ã«æ†§ã‚Œã¦ï½](https://3up-tec.jp/2024/11/15/1530/)
- [ã€Unityã€‘VRMãƒ¢ãƒ‡ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹æ–¹æ³•](https://geeos.blog/2025/03/24/unity-vrm-import/)
- [UniVRMå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://site-builder.wiki/posts/23532)

### ä¼ºã‹é–¢é€£

- [ä¼ºã‹ã‹ã‚‰å¤–éƒ¨ API ã‚’å©ãï½GPT ã®è¨€è‘‰ã‚’å–‹ã‚‰ã›ã‚‹æœ€å°æ§‹æˆï½](https://note.com/allegromoltov/n/n354c0e237c13)
- [ç‹¬ç«‹ä¼ºã‹ç ”ç©¶æ–½è¨­ ã°ãã¨ã‚‰ç ”ç©¶æ‰€](https://ssp.shillest.net/)
- [ä¼ºã‹æƒ…å ±ãƒ–ãƒ­ã‚°ã€Œghost-logã€](https://ghost-log.net/)

---

## è£œè¶³äº‹é …

### ãƒªã‚¹ã‚¯ç®¡ç†

**æŠ€è¡“çš„ãƒªã‚¹ã‚¯:**

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| Ollamaãƒ¢ãƒ‡ãƒ«ã®å¿œç­”å“è³ª | ä¸­ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã€ãƒ¢ãƒ‡ãƒ«å¤‰æ›´ |
| VRMé€£æºã®é…å»¶ | é«˜ | éåŒæœŸå‡¦ç†ã€ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° |
| Unityé–‹ç™ºã®æŠ€è¡“ç¿’å¾— | é«˜ | æ®µéšçš„å­¦ç¿’ã€æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚è€ƒ |

**ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªã‚¹ã‚¯:**

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| ãƒ•ã‚§ãƒ¼ã‚º3ã®é•·æœŸåŒ– | é«˜ | ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã§æ—©æœŸæ¤œè¨¼ |
| ãƒ¢ãƒ‡ãƒ«åˆ¶ä½œã®é…å»¶ | ä¸­ | æ—¢å­˜VRMã§å…ˆè¡Œé–‹ç™º |

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

- Gitä½¿ç”¨æ¨å¥¨
- å„ãƒ•ã‚§ãƒ¼ã‚ºã”ã¨ã«ã‚¿ã‚°ä½œæˆ
  - `v2.0-auto-talk`ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†ï¼‰
  - `v2.1-manzai`ï¼ˆãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†ï¼‰
  - `v3.0-vrm`ï¼ˆãƒ•ã‚§ãƒ¼ã‚º3å®Œäº†ï¼‰

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã«ä»¥ä¸‹ã‚’æ›´æ–°ï¼š
- README.md
- CLAUDE.md
- CHANGELOG.md
- æœ¬å®Ÿè£…è¨ˆç”»æ›¸

---

**ä½œæˆè€…:** Claude Code
**æœ€çµ‚æ›´æ–°:** 2025å¹´12æœˆ29æ—¥
